@model GCUSMS.ViewModels.TournamentTeamVM

@{ ViewData["Title"] = "Edit Team's Details"; }

@{
    Layout = "~/Views/Shared/_Dashboard.cshtml";
}

@if (Model != null)
{
<div class="m-3">
    <h2 class="alert-heading">
        <span class="text-primary">@Model.Team.TeamName</span> IN <span class="text-primary">@Model.Tournament.TournamentName</span>
    </h2>
    <hr />

    <dl class="row">
        <dt class="col-sm-2">
            Profile Image
        </dt>
        <dd class="col-sm-10">
            <img src="~/images/TeamsLogo/@Model.Team.LogoImagePath" class="rounded float-left" style="max-height:200px" alt="User Image">
        </dd>

        <dt class="col-sm-2">
            Team Id
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.TeamId)
        </dd>

        <dt class="col-sm-2">
            Team Name
        </dt>

        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Team.TeamName)
        </dd>

        <dt class="col-sm-2">
            Team Sports
        </dt>

        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Team.TeamSports)
        </dd>

        <dt class="col-sm-2">
            Team Level
        </dt>

        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Team.TeamLevel)
        </dd>

        @if (Model.Team.DepartmentName != null)
        {
            <dt class="col-sm-2">
                Department Name
            </dt>

            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.Team.DepartmentName)
            </dd>
        }

        <dt class="col-sm-2">
            Actions
        </dt>

        <dd class="col-sm-10">
            <a class="btn btn-primary btn-sm" target="_blank" asp-controller="Team" asp-action="EditTeam" asp-route-id="@Model.TeamId">
                <i class="fas fa-list"></i> Team Details
            </a>
            @*|
                <a class="btn btn-primary btn-sm" asp-controller="Team" asp-action="PlayersList" asp-route-id="@Model.TeamId">
                    <i class="fa fa-list"></i> Players List
                </a>*@
        </dd>
    </dl>

    <hr />

    <h1 class="text-info">Update Team Stats</h1>

    @*With Team name*@
    @*<p class="text-black-50">
            Maximum number of matches played by a team (@ViewBag.MaximumMatchesPlayedTeam) in this tournament are : @ViewBag.MaximumMatchesPlayed
        </p>*@

    @*Without Team name*@
    @*<p class="text-black-50">
        Maximum number of matches played by a team in this tournament are : @ViewBag.MaximumMatchesPlayed
    </p>*@

    @if (@ViewBag.MatchesPlayed != @ViewBag.TotalTeamStats)
    {
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            You have played <strong>@ViewBag.MatchesPlayed</strong> Matches.
            Please update the team stats accordingly!
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
    }

    <form asp-controller="Team" asp-action="EditTournamentTeams" method="post" class="mt-3">
        <div asp-validation-summary="All" class="text-danger">
        </div>
        @*Use hidden input elements to store tournament id ,team id
            which we need when we submit the form and update data in the database*@
        <input hidden asp-for="TeamId" />
        <input hidden asp-for="TournamentId" />

        <div class="form-group row">
            <label asp-for="MatchesPlayed" class="col-sm-2 col-form-label">Matches Played</label>
            <div class="col-sm-10">
                <input asp-for="MatchesPlayed" class="form-control" placeholder="Matches Played" required>
                <span asp-validation-for="MatchesPlayed" class="text-danger"></span>
            </div>
        </div>

        <div class="form-group row">
            <label asp-for="MatchesWon" class="col-sm-2 col-form-label">Matches Won</label>
            <div class="col-sm-10">
                <input asp-for="MatchesWon" class="form-control" placeholder="Matches Won" required>
                <span asp-validation-for="MatchesWon" class="text-danger"></span>
            </div>
        </div>

        <div class="form-group row">
            <label asp-for="MatchesLost" class="col-sm-2 col-form-label">Matches Lost</label>
            <div class="col-sm-10">
                <input asp-for="MatchesLost" class="form-control" placeholder="Matches Lost" required>
                <span asp-validation-for="MatchesLost" class="text-danger"></span>
            </div>
        </div>

        <div class="form-group row">
            <label asp-for="MatchesDrawed" class="col-sm-2 col-form-label">Matches Drawed</label>
            <div class="col-sm-10">
                <input asp-for="MatchesDrawed" class="form-control" placeholder="Matches Drawed" required>
                <span asp-validation-for="MatchesDrawed" class="text-danger"></span>
            </div>
        </div>

        <div class="m-4 d-flex justify-content-center">
            <a class="btn btn-danger" asp-action="RemoveTeamFromTournament" asp-route-id="@Model.TournamentTeamId">
                <i class="fa fa-remove"></i> Remove
            </a>
            &nbsp;
            <a class="btn btn-outline-secondary" asp-action="ManageTournamentTeam" asp-route-id="@Model.TournamentId">
                <i class="fa fa-arrow-left"></i> Go Back
            </a>
            &nbsp;
            <button type="submit" class="btn btn-success">Update</button>
        </div>

    </form>
</div>
}
else
{
    <div class="text-center mt-5">

        <span class="fas fa-exclamation-triangle text-red" style="font-size:17rem;"></span>
        <h1 class="m-5">Something Went Wrong</h1>
        <p class="text-muted">
            Which Tournament you are trying to find details of? What is the ID of the this Tournament? <br />Is there something Wrong with the database.<br />
            Go back and try again if error persists <br />
            Please Contact IT Team to resolve this issue.
        </p>
        <a class="btn btn-outline-secondary" asp-action="TournamentList">
            <i class="fa fa-arrow-left"></i> Go Back
        </a>

    </div>
}