@model List<GCUSMS.ViewModels.TournamentTeamVM>

@{ ViewData["Title"] = "Departmental Tournament Teams Details"; }

@{
    Layout = "~/Views/Shared/_Dashboard.cshtml";
}

@if (Model != null)
{

    <h1 class="text-center mb-4">@ViewBag.TournamentName | Teams List</h1>
<div class="row">
    <div class="col-6">
        <div class="info-box bg-gradient-blue">
            <span class="info-box-icon"><i class="fas fa-baseball-ball"></i></span>

            <div class="info-box-content justify-content-center">
                <span class="info-box-text">@ViewBag.TotalTeams</span>
                <span class="info-box-number">Total Teams</span>
            </div>
        </div>
    </div>

    <div class="col-6">
        <div class="info-box bg-gradient-blue">
            <span class="info-box-icon"><i class="fas fa-baseball-ball"></i></span>

            <div class="info-box-content justify-content-center">
                <span class="info-box-text">@ViewBag.TotalDepartmentalTeams</span>
                <span class="info-box-number">Total @ViewBag.userDepartment Teams</span>
            </div>
        </div>
    </div>
</div>
    <a class="btn btn-outline-secondary" asp-controller="DepartmentalTournaments" asp-action="DepartmentalTournamentDetails" asp-route-id="@ViewBag.TournamentId">
        <i class="fa fa-arrow-left"></i> Go Back
    </a>
    <div>
        <table id="TableData" class="display nowrap table table-striped table-bordered hover" style="width:100%">
            <thead class="thead-dark">
                <tr>
                    <th scope="col">Team Logo</th>
                    <th scope="col">Team Name</th>
                    <th scope="col">Level</th>
                    <th scope="col">Sports</th>
                    <th scope="col">Maximum Players</th>
                    <th scope="col">Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var team in Model)
                {
                    <tr>
                        <td><img class="img-thumbnail ml-3 mt-2" src="~/images/TeamsLogo/@team.Team.LogoImagePath" style="max-height:150px; max-width:150px;" alt="" /></td>
                        <td>@team.Team.TeamName</td>
                        <td>@team.Team.TeamLevel</td>
                        <td>@team.Team.TeamSports</td>
                        <td>@team.Team.MaximumPlayers</td>
                        <td>
                            <a asp-controller="DepartmentalTeam" asp-action="EditDepartmentalTournamentTeams" asp-route-Teamid="@team.TeamId" asp-route-TournamentId="@team.TournamentId" class="btn btn-secondary">
                                <i class=" fa fa-list"></i> Details
                            </a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
}
else
{
    <div class="text-center mt-5">

        <span class="fas fa-exclamation-triangle text-red" style="font-size:17rem;"></span>
        <h1 class="m-5">Something Went Wrong</h1>
        <p class="text-muted">
            Which Tournament you are trying to find details of? What is the ID of the this Tournament? <br />Is there something Wrong with the database.<br />
            Go back and try again if error persists <br />
            Please Contact IT Team to resolve this issue.
        </p>
        <a class="btn btn-outline-secondary" asp-action="Index">
            <i class="fa fa-arrow-left"></i> Go Back
        </a>

    </div>
}

@section Scripts
{
    <script>
        $(document).ready(function () {
            $('#TableData').DataTable({

                responsive: {
                    details: {
                        display: $.fn.dataTable.Responsive.display.modal({
                            header: function (row) {
                                var data = row.data();
                                return data[1]
                            }
                        }),
                        renderer: $.fn.dataTable.Responsive.renderer.tableAll()
                    }
                },

                dom: 'Bfrtip',
                buttons: [
                    { extend: 'pdf', className: 'btn btn-primary' },
                    { extend: 'print', className: 'btn btn-primary' },
                    { extend: 'copy', className: 'btn btn-primary' },
                    { extend: 'csv', className: 'btn btn-primary' },
                    { extend: 'excel', className: 'btn btn-primary' }
                ]
            });
        });
    </script>

}