@model List<GCUSMS.ViewModels.FeedbackVM>

@{
    Layout = "~/Views/Shared/_Dashboard.cshtml";
}

@{
    ViewData["Title"] = "Feedbacks";
}

<h1 class="text-center mb-4">Feedbacks</h1>


<table id="TableData" class="display nowrap table table-striped table-bordered hover" style="width:100%">
    <thead class="thead-dark">
        <tr>
            <th>
                Name
            </th>
            <th>
                Email
            </th>
            <th>
                Message
            </th>
            <th>
                Date Submitted
            </th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>

        @foreach (var item in Model)
        {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Name)
            <td>
                @Html.DisplayFor(modelItem => item.Email)
            </td>
            <td>
                @if (item.FeedbackMessage.Length > 12)
                {
                    @(@item.FeedbackMessage.Substring(0, 12) + "...")
                }
                else
                {
                    @Html.DisplayFor(modelItem => item.Email)
                }
            </td>
            <td>
                @item.DateSubmitted.ToString("MM/dd/yyyy")
            </td>
            <td>
                <a class="btn btn-outline-primary" asp-action="FeedbackDetails" asp-route-id="@item.FeedbackID">
                    <i class="fa fa-file"></i> See Details
                </a>
            </td>
        </tr>
        }
    </tbody>
</table>

@section Scripts
{
    <script>
        $(document).ready(function () {
            $('#TableData').DataTable({

                responsive: {
                    details: {
                        display: $.fn.dataTable.Responsive.display.modal({
                            header: function (row) {
                                var data = row.data();
                                return data[0] + " " + data[1]
                            }
                        }),
                        renderer: $.fn.dataTable.Responsive.renderer.tableAll()
                    }
                },

                dom: 'Bfrtip',
                buttons: [
                    { extend: 'pdf', className: 'btn btn-primary' },
                    { extend: 'print', className: 'btn btn-primary' },
                    { extend: 'copy', className: 'btn btn-primary' },
                    { extend: 'csv', className: 'btn btn-primary' },
                    { extend: 'excel', className: 'btn btn-primary' }
                ]
            });
        });
    </script>
}